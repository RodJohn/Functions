

# 用户部分

## 1. 用户来源  

    是否仅有企业内部用户,
    是否有外部用户,
    是否需要按照组织架构显示
    需要企业内部用户接口,
    和相应的触发更新


## 2.用户数据

    用户id  用户名  头像   状态   
    
    只允许修改状态 ,单向修改
    
## 3. 用户识别

    由    
    
    
# 聊天

## search contact   

    search contact 按照什么 内容+用户查询
    
    给出的结果是什么
    
## 会话列表

   页面保存推荐哪些会话
   最后聊天时间倒序
   聊天名 用户名 聊天图像  未读消息数量 最后一条消息  最后聊天时间  
   
   
   
# 点对点聊天

    发送文字,
    发送表情
    发送图片
    发送文件
    
    未接受/已接收/已读
    
    
    User-A--User-B(字符串主键 id小的在前)  
    服务器接受时间  
    发送方  接收方  
    消息类型(文字/表情 /图片//附件)   消息正文  
    状态(未接受/已接收/已读)  
    最后修改时间
    
    大数据量 
    建议使用mongo  mysql sharding-jdbc分库分表
    
## 表结构

   主键
   
   数据量--物理上删除一个月内的数据  空洞     


# 群聊

       非焦点.消息提示
       
       
       未读消息提示
       条数  最后一条未读消息的时间
       
       离线消息提示
       
       历史消息查询
       
       用户当前状态
       
       用户信息
       头像 昵称 
       
       
       时间的显示方法